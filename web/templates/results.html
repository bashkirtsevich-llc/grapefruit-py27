{% extends "header.html" %}
{% block results %}
    <div class="left-content">
      <div class="result-stats">About {{ total_count }} results ({{ time_elapsed }} seconds)</div>
      
      <div class="search-ret">
        <ul class="search-ret-list">
          {%  if total_count > 0 %}
            {% for result in results %}
            <li class="search-ret-item">
              <h2 class="item-title">
                <a href="/details?t={{ result.info_hash }}{% if query %}&q={{ query }}{% endif %}" title="{{ result.title }}">{{ result.title }}</a>
              </h2>

              <div class="item-meta-info">
                <a title="Download using magnet" href="magnet:?xt=urn:btih:{{ result.info_hash }}&dn={{ result.title | urlencode }}" class="magnet"><i class="fa fa-magnet"></i> Magnet Link</a>
                Size: <span class="item-meta-info-value">{{ result.size }}</span>
                Files: <span class="item-meta-info-value">{{ result.files_count }}</span>
              </div>

              <ul class="item-file-list">

                {% for file in result.files %}
                <li class="file">
                  <span class="file-icon">
                    <i class="fa fa-file-archive-o"></i>
                  </span>
                  <span class="file-name">
                    {{ file.name }}
                  </span>
                  <span class="file-size">
                    {{ file.size }}
                  </span>
                </li>
                {% endfor %}

                {% if result.files_count > 10 %}
                …
                {% endif %}

              </ul>
            </li>
            {% endfor %}
          {% else %}
            <img src="/no_result.png" alt="Sorry! No results found.">
          {% endif %}
        </ul>
      </div>

      {% if total_pages > 1 %}
      <div class="nav">
        <nav role="navigation">
          <ul class="pagination">
            <li class="button">
              {% if page > 1 %}
              <a href="{{ source_url }}?{% if query %}q={{ query }}&{% endif %}p={{ page - 1 }}">« Previous</a>
              {% else %}
              <a href="{{ source_url }}?q={{ query }}/#" class="disabled">« Previous</a>
              {% endif %}
            </li>
            {% for n in range(total_pages) %}
            <li class="button">
              {% if n + 1 == page %}
              <strong>{{ n + 1}}</strong>
              {% else %}
              <a href="{{ source_url }}?{% if query %}q={{ query }}&{% endif %}p={{ n + 1 }}">{{ n + 1 }}</a>
              {% endif %}
            </li>
            <!--<span class="ellipsis">…</span>-->
            {% endfor %}
            <li class="button">
              {% if page >= total_pages %}
              <a href="{{ source_url }}?q={{ query }}/#" class="disabled">Next »</a>
              {% else %}
              <a href="{{ source_url }}?{% if query %}q={{ query }}&{% endif %}p={{ page + 1 }}">Next »</a>
              {% endif %}
            </li>
          </ul>
        </nav>
      </div>
      {% endif %}

    </div>
{% endblock %}